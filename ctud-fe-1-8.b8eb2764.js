let e=async()=>{let e=await fetch("http://localhost:3000/icecream");if(!e.ok)throw Error("Failed!");return e.json()},t=async e=>{let t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}},a=await fetch("http://localhost:3000/icecream",t);if(!a.ok)throw Error("Failed!");return a.json()},a=async e=>{let t=await fetch(`http://localhost:3000/icecream/${e}`,{method:"DELETE"});if(!t.ok)throw Error("Failed!");return t.json()},l=async(e,t)=>{let a={method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"}},l=await fetch(`http://localhost:3000/icecream/${e}`,a);if(!l.ok)throw Error("Failed!");return l.json()},r=document.querySelector(".list"),i=document.querySelector(".add-btn"),n=document.querySelector(".backdrop"),o=document.querySelector(".modal-form"),c=null;function s(e){r.innerHTML=e.map(({id:e,flavour:t,type:a,price:l,description:r,image:i})=>`<li id="${e}" class="item">
            <img src="${i}" alt="${a}" class="item-img">
            <h3 class="item-flavour">${t}</h3>
            <p class="item-type">${a}</p>
            <p class="item-price">$<span class="span">${l}</span></p>
            <p class="item-desc">${r}</p>
            <div class="btn-wrapper"> <button data-action="delete" type="button" class="button">Delete</button>
            <button data-action="edit" type="button" class="button">Edit</button>
        </div>
        </li>`).join("")}function u(){n.style.display="flex"}function d(){n.style.display="none"}(async()=>{s(await e())})(),i.addEventListener("click",()=>{u()}),o.addEventListener("submit",async a=>{a.preventDefault();let r=a.currentTarget.elements,i={flavour:r.flavour.value.trim(),type:r.type.value.trim(),price:r.price.value.trim(),description:r.desc.value.trim(),image:r.url.value.trim()};null===c&&(await t(i),o.reset(),d(),s(await e())),c&&(await l(c,i),o.reset(),d(),s(await e()),c=null)}),r.addEventListener("click",async t=>{let l=t.target.dataset.action;if(!l)return;let r=t.target.closest("li"),i=r.id;if("delete"===l){await a(i);let t=await e();console.log(t),s(t)}"edit"===l&&(c=i,o.elements.url.value=r.querySelector(".item-img").src,o.elements.flavour.value=r.querySelector(".item-flavour").textContent,o.elements.type.value=r.querySelector(".item-type").textContent,o.elements.price.value=r.querySelector(".span").textContent,o.elements.desc.value=r.querySelector(".item-desc").textContent,u())});
//# sourceMappingURL=ctud-fe-1-8.b8eb2764.js.map
